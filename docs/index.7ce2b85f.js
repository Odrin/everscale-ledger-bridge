(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();var k={},Ke={};Ke.byteLength=Jr;Ke.toByteArray=en;Ke.fromByteArray=nn;var te=[],z=[],Yr=typeof Uint8Array<"u"?Uint8Array:Array,ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ve=0,Zr=ft.length;ve<Zr;++ve)te[ve]=ft[ve],z[ft.charCodeAt(ve)]=ve;z["-".charCodeAt(0)]=62;z["_".charCodeAt(0)]=63;function Rr(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var s=t===e?0:4-t%4;return[t,s]}function Jr(r){var e=Rr(r),t=e[0],s=e[1];return(t+s)*3/4-s}function Qr(r,e,t){return(e+t)*3/4-t}function en(r){var e,t=Rr(r),s=t[0],o=t[1],a=new Yr(Qr(r,s,o)),l=0,u=o>0?s-4:s,p;for(p=0;p<u;p+=4)e=z[r.charCodeAt(p)]<<18|z[r.charCodeAt(p+1)]<<12|z[r.charCodeAt(p+2)]<<6|z[r.charCodeAt(p+3)],a[l++]=e>>16&255,a[l++]=e>>8&255,a[l++]=e&255;return o===2&&(e=z[r.charCodeAt(p)]<<2|z[r.charCodeAt(p+1)]>>4,a[l++]=e&255),o===1&&(e=z[r.charCodeAt(p)]<<10|z[r.charCodeAt(p+1)]<<4|z[r.charCodeAt(p+2)]>>2,a[l++]=e>>8&255,a[l++]=e&255),a}function tn(r){return te[r>>18&63]+te[r>>12&63]+te[r>>6&63]+te[r&63]}function rn(r,e,t){for(var s,o=[],a=e;a<t;a+=3)s=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(r[a+2]&255),o.push(tn(s));return o.join("")}function nn(r){for(var e,t=r.length,s=t%3,o=[],a=16383,l=0,u=t-s;l<u;l+=a)o.push(rn(r,l,l+a>u?u:l+a));return s===1?(e=r[t-1],o.push(te[e>>2]+te[e<<4&63]+"==")):s===2&&(e=(r[t-2]<<8)+r[t-1],o.push(te[e>>10]+te[e>>4&63]+te[e<<2&63]+"=")),o.join("")}var Lt={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Lt.read=function(r,e,t,s,o){var a,l,u=o*8-s-1,p=(1<<u)-1,E=p>>1,g=-7,v=t?o-1:0,T=t?-1:1,I=r[e+v];for(v+=T,a=I&(1<<-g)-1,I>>=-g,g+=u;g>0;a=a*256+r[e+v],v+=T,g-=8);for(l=a&(1<<-g)-1,a>>=-g,g+=s;g>0;l=l*256+r[e+v],v+=T,g-=8);if(a===0)a=1-E;else{if(a===p)return l?NaN:(I?-1:1)*(1/0);l=l+Math.pow(2,s),a=a-E}return(I?-1:1)*l*Math.pow(2,a-s)};Lt.write=function(r,e,t,s,o,a){var l,u,p,E=a*8-o-1,g=(1<<E)-1,v=g>>1,T=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=s?0:a-1,q=s?1:-1,C=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,l=g):(l=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-l))<1&&(l--,p*=2),l+v>=1?e+=T/p:e+=T*Math.pow(2,1-v),e*p>=2&&(l++,p/=2),l+v>=g?(u=0,l=g):l+v>=1?(u=(e*p-1)*Math.pow(2,o),l=l+v):(u=e*Math.pow(2,v-1)*Math.pow(2,o),l=0));o>=8;r[t+I]=u&255,I+=q,u/=256,o-=8);for(l=l<<o|u,E+=o;E>0;r[t+I]=l&255,I+=q,l/=256,E-=8);r[t+I-q]|=C*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=Ke,t=Lt,s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=rt,r.INSPECT_MAX_BYTES=50;const o=2147483647;r.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=a(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const c=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(c,n),c.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.byteOffset}});function l(c){if(c>o)throw new RangeError('The value "'+c+'" is invalid for option "size"');const n=new Uint8Array(c);return Object.setPrototypeOf(n,u.prototype),n}function u(c,n,i){if(typeof c=="number"){if(typeof n=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(c)}return p(c,n,i)}u.poolSize=8192;function p(c,n,i){if(typeof c=="string")return T(c,n);if(ArrayBuffer.isView(c))return q(c);if(c==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(ee(c,ArrayBuffer)||c&&ee(c.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ee(c,SharedArrayBuffer)||c&&ee(c.buffer,SharedArrayBuffer)))return C(c,n,i);if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const f=c.valueOf&&c.valueOf();if(f!=null&&f!==c)return u.from(f,n,i);const h=P(c);if(h)return h;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof c[Symbol.toPrimitive]=="function")return u.from(c[Symbol.toPrimitive]("string"),n,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c)}u.from=function(c,n,i){return p(c,n,i)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function E(c){if(typeof c!="number")throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}function g(c,n,i){return E(c),c<=0?l(c):n!==void 0?typeof i=="string"?l(c).fill(n,i):l(c).fill(n):l(c)}u.alloc=function(c,n,i){return g(c,n,i)};function v(c){return E(c),l(c<0?0:K(c)|0)}u.allocUnsafe=function(c){return v(c)},u.allocUnsafeSlow=function(c){return v(c)};function T(c,n){if((typeof n!="string"||n==="")&&(n="utf8"),!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);const i=Be(c,n)|0;let f=l(i);const h=f.write(c,n);return h!==i&&(f=f.slice(0,h)),f}function I(c){const n=c.length<0?0:K(c.length)|0,i=l(n);for(let f=0;f<n;f+=1)i[f]=c[f]&255;return i}function q(c){if(ee(c,Uint8Array)){const n=new Uint8Array(c);return C(n.buffer,n.byteOffset,n.byteLength)}return I(c)}function C(c,n,i){if(n<0||c.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<n+(i||0))throw new RangeError('"length" is outside of buffer bounds');let f;return n===void 0&&i===void 0?f=new Uint8Array(c):i===void 0?f=new Uint8Array(c,n):f=new Uint8Array(c,n,i),Object.setPrototypeOf(f,u.prototype),f}function P(c){if(u.isBuffer(c)){const n=K(c.length)|0,i=l(n);return i.length===0||c.copy(i,0,0,n),i}if(c.length!==void 0)return typeof c.length!="number"||lt(c.length)?l(0):I(c);if(c.type==="Buffer"&&Array.isArray(c.data))return I(c.data)}function K(c){if(c>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return c|0}function rt(c){return+c!=c&&(c=0),u.alloc(+c)}u.isBuffer=function(n){return n!=null&&n._isBuffer===!0&&n!==u.prototype},u.compare=function(n,i){if(ee(n,Uint8Array)&&(n=u.from(n,n.offset,n.byteLength)),ee(i,Uint8Array)&&(i=u.from(i,i.offset,i.byteLength)),!u.isBuffer(n)||!u.isBuffer(i))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(n===i)return 0;let f=n.length,h=i.length;for(let d=0,y=Math.min(f,h);d<y;++d)if(n[d]!==i[d]){f=n[d],h=i[d];break}return f<h?-1:h<f?1:0},u.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(n,i){if(!Array.isArray(n))throw new TypeError('"list" argument must be an Array of Buffers');if(n.length===0)return u.alloc(0);let f;if(i===void 0)for(i=0,f=0;f<n.length;++f)i+=n[f].length;const h=u.allocUnsafe(i);let d=0;for(f=0;f<n.length;++f){let y=n[f];if(ee(y,Uint8Array))d+y.length>h.length?(u.isBuffer(y)||(y=u.from(y)),y.copy(h,d)):Uint8Array.prototype.set.call(h,y,d);else if(u.isBuffer(y))y.copy(h,d);else throw new TypeError('"list" argument must be an Array of Buffers');d+=y.length}return h};function Be(c,n){if(u.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||ee(c,ArrayBuffer))return c.byteLength;if(typeof c!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);const i=c.length,f=arguments.length>2&&arguments[2]===!0;if(!f&&i===0)return 0;let h=!1;for(;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return ut(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return Gt(c).length;default:if(h)return f?-1:ut(c).length;n=(""+n).toLowerCase(),h=!0}}u.byteLength=Be;function nt(c,n,i){let f=!1;if((n===void 0||n<0)&&(n=0),n>this.length||((i===void 0||i>this.length)&&(i=this.length),i<=0)||(i>>>=0,n>>>=0,i<=n))return"";for(c||(c="utf8");;)switch(c){case"hex":return $(this,n,i);case"utf8":case"utf-8":return R(this,n,i);case"ascii":return N(this,n,i);case"latin1":case"binary":return U(this,n,i);case"base64":return S(this,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,n,i);default:if(f)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),f=!0}}u.prototype._isBuffer=!0;function re(c,n,i){const f=c[n];c[n]=c[i],c[i]=f}u.prototype.swap16=function(){const n=this.length;if(n%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<n;i+=2)re(this,i,i+1);return this},u.prototype.swap32=function(){const n=this.length;if(n%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<n;i+=4)re(this,i,i+3),re(this,i+1,i+2);return this},u.prototype.swap64=function(){const n=this.length;if(n%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<n;i+=8)re(this,i,i+7),re(this,i+1,i+6),re(this,i+2,i+5),re(this,i+3,i+4);return this},u.prototype.toString=function(){const n=this.length;return n===0?"":arguments.length===0?R(this,0,n):nt.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(n){if(!u.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:u.compare(this,n)===0},u.prototype.inspect=function(){let n="";const i=r.INSPECT_MAX_BYTES;return n=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(n+=" ... "),"<Buffer "+n+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(n,i,f,h,d){if(ee(n,Uint8Array)&&(n=u.from(n,n.offset,n.byteLength)),!u.isBuffer(n))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof n);if(i===void 0&&(i=0),f===void 0&&(f=n?n.length:0),h===void 0&&(h=0),d===void 0&&(d=this.length),i<0||f>n.length||h<0||d>this.length)throw new RangeError("out of range index");if(h>=d&&i>=f)return 0;if(h>=d)return-1;if(i>=f)return 1;if(i>>>=0,f>>>=0,h>>>=0,d>>>=0,this===n)return 0;let y=d-h,_=f-i;const j=Math.min(y,_),G=this.slice(h,d),X=n.slice(i,f);for(let D=0;D<j;++D)if(G[D]!==X[D]){y=G[D],_=X[D];break}return y<_?-1:_<y?1:0};function Oe(c,n,i,f,h){if(c.length===0)return-1;if(typeof i=="string"?(f=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,lt(i)&&(i=h?0:c.length-1),i<0&&(i=c.length+i),i>=c.length){if(h)return-1;i=c.length-1}else if(i<0)if(h)i=0;else return-1;if(typeof n=="string"&&(n=u.from(n,f)),u.isBuffer(n))return n.length===0?-1:be(c,n,i,f,h);if(typeof n=="number")return n=n&255,typeof Uint8Array.prototype.indexOf=="function"?h?Uint8Array.prototype.indexOf.call(c,n,i):Uint8Array.prototype.lastIndexOf.call(c,n,i):be(c,[n],i,f,h);throw new TypeError("val must be string, number or Buffer")}function be(c,n,i,f,h){let d=1,y=c.length,_=n.length;if(f!==void 0&&(f=String(f).toLowerCase(),f==="ucs2"||f==="ucs-2"||f==="utf16le"||f==="utf-16le")){if(c.length<2||n.length<2)return-1;d=2,y/=2,_/=2,i/=2}function j(X,D){return d===1?X[D]:X.readUInt16BE(D*d)}let G;if(h){let X=-1;for(G=i;G<y;G++)if(j(c,G)===j(n,X===-1?0:G-X)){if(X===-1&&(X=G),G-X+1===_)return X*d}else X!==-1&&(G-=G-X),X=-1}else for(i+_>y&&(i=y-_),G=i;G>=0;G--){let X=!0;for(let D=0;D<_;D++)if(j(c,G+D)!==j(n,D)){X=!1;break}if(X)return G}return-1}u.prototype.includes=function(n,i,f){return this.indexOf(n,i,f)!==-1},u.prototype.indexOf=function(n,i,f){return Oe(this,n,i,f,!0)},u.prototype.lastIndexOf=function(n,i,f){return Oe(this,n,i,f,!1)};function it(c,n,i,f){i=Number(i)||0;const h=c.length-i;f?(f=Number(f),f>h&&(f=h)):f=h;const d=n.length;f>d/2&&(f=d/2);let y;for(y=0;y<f;++y){const _=parseInt(n.substr(y*2,2),16);if(lt(_))return y;c[i+y]=_}return y}function st(c,n,i,f){return Ue(ut(n,c.length-i),c,i,f)}function ot(c,n,i,f){return Ue(Hr(n),c,i,f)}function x(c,n,i,f){return Ue(Gt(n),c,i,f)}function w(c,n,i,f){return Ue(Wr(n,c.length-i),c,i,f)}u.prototype.write=function(n,i,f,h){if(i===void 0)h="utf8",f=this.length,i=0;else if(f===void 0&&typeof i=="string")h=i,f=this.length,i=0;else if(isFinite(i))i=i>>>0,isFinite(f)?(f=f>>>0,h===void 0&&(h="utf8")):(h=f,f=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const d=this.length-i;if((f===void 0||f>d)&&(f=d),n.length>0&&(f<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");let y=!1;for(;;)switch(h){case"hex":return it(this,n,i,f);case"utf8":case"utf-8":return st(this,n,i,f);case"ascii":case"latin1":case"binary":return ot(this,n,i,f);case"base64":return x(this,n,i,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,n,i,f);default:if(y)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),y=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function S(c,n,i){return n===0&&i===c.length?e.fromByteArray(c):e.fromByteArray(c.slice(n,i))}function R(c,n,i){i=Math.min(c.length,i);const f=[];let h=n;for(;h<i;){const d=c[h];let y=null,_=d>239?4:d>223?3:d>191?2:1;if(h+_<=i){let j,G,X,D;switch(_){case 1:d<128&&(y=d);break;case 2:j=c[h+1],(j&192)===128&&(D=(d&31)<<6|j&63,D>127&&(y=D));break;case 3:j=c[h+1],G=c[h+2],(j&192)===128&&(G&192)===128&&(D=(d&15)<<12|(j&63)<<6|G&63,D>2047&&(D<55296||D>57343)&&(y=D));break;case 4:j=c[h+1],G=c[h+2],X=c[h+3],(j&192)===128&&(G&192)===128&&(X&192)===128&&(D=(d&15)<<18|(j&63)<<12|(G&63)<<6|X&63,D>65535&&D<1114112&&(y=D))}}y===null?(y=65533,_=1):y>65535&&(y-=65536,f.push(y>>>10&1023|55296),y=56320|y&1023),f.push(y),h+=_}return A(f)}const L=4096;function A(c){const n=c.length;if(n<=L)return String.fromCharCode.apply(String,c);let i="",f=0;for(;f<n;)i+=String.fromCharCode.apply(String,c.slice(f,f+=L));return i}function N(c,n,i){let f="";i=Math.min(c.length,i);for(let h=n;h<i;++h)f+=String.fromCharCode(c[h]&127);return f}function U(c,n,i){let f="";i=Math.min(c.length,i);for(let h=n;h<i;++h)f+=String.fromCharCode(c[h]);return f}function $(c,n,i){const f=c.length;(!n||n<0)&&(n=0),(!i||i<0||i>f)&&(i=f);let h="";for(let d=n;d<i;++d)h+=Kr[c[d]];return h}function M(c,n,i){const f=c.slice(n,i);let h="";for(let d=0;d<f.length-1;d+=2)h+=String.fromCharCode(f[d]+f[d+1]*256);return h}u.prototype.slice=function(n,i){const f=this.length;n=~~n,i=i===void 0?f:~~i,n<0?(n+=f,n<0&&(n=0)):n>f&&(n=f),i<0?(i+=f,i<0&&(i=0)):i>f&&(i=f),i<n&&(i=n);const h=this.subarray(n,i);return Object.setPrototypeOf(h,u.prototype),h};function O(c,n,i){if(c%1!==0||c<0)throw new RangeError("offset is not uint");if(c+n>i)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(n,i,f){n=n>>>0,i=i>>>0,f||O(n,i,this.length);let h=this[n],d=1,y=0;for(;++y<i&&(d*=256);)h+=this[n+y]*d;return h},u.prototype.readUintBE=u.prototype.readUIntBE=function(n,i,f){n=n>>>0,i=i>>>0,f||O(n,i,this.length);let h=this[n+--i],d=1;for(;i>0&&(d*=256);)h+=this[n+--i]*d;return h},u.prototype.readUint8=u.prototype.readUInt8=function(n,i){return n=n>>>0,i||O(n,1,this.length),this[n]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(n,i){return n=n>>>0,i||O(n,2,this.length),this[n]|this[n+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(n,i){return n=n>>>0,i||O(n,2,this.length),this[n]<<8|this[n+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(n,i){return n=n>>>0,i||O(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+this[n+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(n,i){return n=n>>>0,i||O(n,4,this.length),this[n]*16777216+(this[n+1]<<16|this[n+2]<<8|this[n+3])},u.prototype.readBigUInt64LE=ue(function(n){n=n>>>0,me(n,"offset");const i=this[n],f=this[n+7];(i===void 0||f===void 0)&&Re(n,this.length-8);const h=i+this[++n]*2**8+this[++n]*2**16+this[++n]*2**24,d=this[++n]+this[++n]*2**8+this[++n]*2**16+f*2**24;return BigInt(h)+(BigInt(d)<<BigInt(32))}),u.prototype.readBigUInt64BE=ue(function(n){n=n>>>0,me(n,"offset");const i=this[n],f=this[n+7];(i===void 0||f===void 0)&&Re(n,this.length-8);const h=i*2**24+this[++n]*2**16+this[++n]*2**8+this[++n],d=this[++n]*2**24+this[++n]*2**16+this[++n]*2**8+f;return(BigInt(h)<<BigInt(32))+BigInt(d)}),u.prototype.readIntLE=function(n,i,f){n=n>>>0,i=i>>>0,f||O(n,i,this.length);let h=this[n],d=1,y=0;for(;++y<i&&(d*=256);)h+=this[n+y]*d;return d*=128,h>=d&&(h-=Math.pow(2,8*i)),h},u.prototype.readIntBE=function(n,i,f){n=n>>>0,i=i>>>0,f||O(n,i,this.length);let h=i,d=1,y=this[n+--h];for(;h>0&&(d*=256);)y+=this[n+--h]*d;return d*=128,y>=d&&(y-=Math.pow(2,8*i)),y},u.prototype.readInt8=function(n,i){return n=n>>>0,i||O(n,1,this.length),this[n]&128?(255-this[n]+1)*-1:this[n]},u.prototype.readInt16LE=function(n,i){n=n>>>0,i||O(n,2,this.length);const f=this[n]|this[n+1]<<8;return f&32768?f|4294901760:f},u.prototype.readInt16BE=function(n,i){n=n>>>0,i||O(n,2,this.length);const f=this[n+1]|this[n]<<8;return f&32768?f|4294901760:f},u.prototype.readInt32LE=function(n,i){return n=n>>>0,i||O(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24},u.prototype.readInt32BE=function(n,i){return n=n>>>0,i||O(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]},u.prototype.readBigInt64LE=ue(function(n){n=n>>>0,me(n,"offset");const i=this[n],f=this[n+7];(i===void 0||f===void 0)&&Re(n,this.length-8);const h=this[n+4]+this[n+5]*2**8+this[n+6]*2**16+(f<<24);return(BigInt(h)<<BigInt(32))+BigInt(i+this[++n]*2**8+this[++n]*2**16+this[++n]*2**24)}),u.prototype.readBigInt64BE=ue(function(n){n=n>>>0,me(n,"offset");const i=this[n],f=this[n+7];(i===void 0||f===void 0)&&Re(n,this.length-8);const h=(i<<24)+this[++n]*2**16+this[++n]*2**8+this[++n];return(BigInt(h)<<BigInt(32))+BigInt(this[++n]*2**24+this[++n]*2**16+this[++n]*2**8+f)}),u.prototype.readFloatLE=function(n,i){return n=n>>>0,i||O(n,4,this.length),t.read(this,n,!0,23,4)},u.prototype.readFloatBE=function(n,i){return n=n>>>0,i||O(n,4,this.length),t.read(this,n,!1,23,4)},u.prototype.readDoubleLE=function(n,i){return n=n>>>0,i||O(n,8,this.length),t.read(this,n,!0,52,8)},u.prototype.readDoubleBE=function(n,i){return n=n>>>0,i||O(n,8,this.length),t.read(this,n,!1,52,8)};function B(c,n,i,f,h,d){if(!u.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>h||n<d)throw new RangeError('"value" argument is out of bounds');if(i+f>c.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(n,i,f,h){if(n=+n,i=i>>>0,f=f>>>0,!h){const _=Math.pow(2,8*f)-1;B(this,n,i,f,_,0)}let d=1,y=0;for(this[i]=n&255;++y<f&&(d*=256);)this[i+y]=n/d&255;return i+f},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(n,i,f,h){if(n=+n,i=i>>>0,f=f>>>0,!h){const _=Math.pow(2,8*f)-1;B(this,n,i,f,_,0)}let d=f-1,y=1;for(this[i+d]=n&255;--d>=0&&(y*=256);)this[i+d]=n/y&255;return i+f},u.prototype.writeUint8=u.prototype.writeUInt8=function(n,i,f){return n=+n,i=i>>>0,f||B(this,n,i,1,255,0),this[i]=n&255,i+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(n,i,f){return n=+n,i=i>>>0,f||B(this,n,i,2,65535,0),this[i]=n&255,this[i+1]=n>>>8,i+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(n,i,f){return n=+n,i=i>>>0,f||B(this,n,i,2,65535,0),this[i]=n>>>8,this[i+1]=n&255,i+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(n,i,f){return n=+n,i=i>>>0,f||B(this,n,i,4,4294967295,0),this[i+3]=n>>>24,this[i+2]=n>>>16,this[i+1]=n>>>8,this[i]=n&255,i+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(n,i,f){return n=+n,i=i>>>0,f||B(this,n,i,4,4294967295,0),this[i]=n>>>24,this[i+1]=n>>>16,this[i+2]=n>>>8,this[i+3]=n&255,i+4};function ce(c,n,i,f,h){Mt(n,f,h,c,i,7);let d=Number(n&BigInt(4294967295));c[i++]=d,d=d>>8,c[i++]=d,d=d>>8,c[i++]=d,d=d>>8,c[i++]=d;let y=Number(n>>BigInt(32)&BigInt(4294967295));return c[i++]=y,y=y>>8,c[i++]=y,y=y>>8,c[i++]=y,y=y>>8,c[i++]=y,i}function at(c,n,i,f,h){Mt(n,f,h,c,i,7);let d=Number(n&BigInt(4294967295));c[i+7]=d,d=d>>8,c[i+6]=d,d=d>>8,c[i+5]=d,d=d>>8,c[i+4]=d;let y=Number(n>>BigInt(32)&BigInt(4294967295));return c[i+3]=y,y=y>>8,c[i+2]=y,y=y>>8,c[i+1]=y,y=y>>8,c[i]=y,i+8}u.prototype.writeBigUInt64LE=ue(function(n,i=0){return ce(this,n,i,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=ue(function(n,i=0){return at(this,n,i,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(n,i,f,h){if(n=+n,i=i>>>0,!h){const j=Math.pow(2,8*f-1);B(this,n,i,f,j-1,-j)}let d=0,y=1,_=0;for(this[i]=n&255;++d<f&&(y*=256);)n<0&&_===0&&this[i+d-1]!==0&&(_=1),this[i+d]=(n/y>>0)-_&255;return i+f},u.prototype.writeIntBE=function(n,i,f,h){if(n=+n,i=i>>>0,!h){const j=Math.pow(2,8*f-1);B(this,n,i,f,j-1,-j)}let d=f-1,y=1,_=0;for(this[i+d]=n&255;--d>=0&&(y*=256);)n<0&&_===0&&this[i+d+1]!==0&&(_=1),this[i+d]=(n/y>>0)-_&255;return i+f},u.prototype.writeInt8=function(n,i,f){return n=+n,i=i>>>0,f||B(this,n,i,1,127,-128),n<0&&(n=255+n+1),this[i]=n&255,i+1},u.prototype.writeInt16LE=function(n,i,f){return n=+n,i=i>>>0,f||B(this,n,i,2,32767,-32768),this[i]=n&255,this[i+1]=n>>>8,i+2},u.prototype.writeInt16BE=function(n,i,f){return n=+n,i=i>>>0,f||B(this,n,i,2,32767,-32768),this[i]=n>>>8,this[i+1]=n&255,i+2},u.prototype.writeInt32LE=function(n,i,f){return n=+n,i=i>>>0,f||B(this,n,i,4,2147483647,-2147483648),this[i]=n&255,this[i+1]=n>>>8,this[i+2]=n>>>16,this[i+3]=n>>>24,i+4},u.prototype.writeInt32BE=function(n,i,f){return n=+n,i=i>>>0,f||B(this,n,i,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),this[i]=n>>>24,this[i+1]=n>>>16,this[i+2]=n>>>8,this[i+3]=n&255,i+4},u.prototype.writeBigInt64LE=ue(function(n,i=0){return ce(this,n,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=ue(function(n,i=0){return at(this,n,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ct(c,n,i,f,h,d){if(i+f>c.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function Ft(c,n,i,f,h){return n=+n,i=i>>>0,h||Ct(c,n,i,4),t.write(c,n,i,f,23,4),i+4}u.prototype.writeFloatLE=function(n,i,f){return Ft(this,n,i,!0,f)},u.prototype.writeFloatBE=function(n,i,f){return Ft(this,n,i,!1,f)};function Dt(c,n,i,f,h){return n=+n,i=i>>>0,h||Ct(c,n,i,8),t.write(c,n,i,f,52,8),i+8}u.prototype.writeDoubleLE=function(n,i,f){return Dt(this,n,i,!0,f)},u.prototype.writeDoubleBE=function(n,i,f){return Dt(this,n,i,!1,f)},u.prototype.copy=function(n,i,f,h){if(!u.isBuffer(n))throw new TypeError("argument should be a Buffer");if(f||(f=0),!h&&h!==0&&(h=this.length),i>=n.length&&(i=n.length),i||(i=0),h>0&&h<f&&(h=f),h===f||n.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(f<0||f>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),n.length-i<h-f&&(h=n.length-i+f);const d=h-f;return this===n&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(i,f,h):Uint8Array.prototype.set.call(n,this.subarray(f,h),i),d},u.prototype.fill=function(n,i,f,h){if(typeof n=="string"){if(typeof i=="string"?(h=i,i=0,f=this.length):typeof f=="string"&&(h=f,f=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!u.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(n.length===1){const y=n.charCodeAt(0);(h==="utf8"&&y<128||h==="latin1")&&(n=y)}}else typeof n=="number"?n=n&255:typeof n=="boolean"&&(n=Number(n));if(i<0||this.length<i||this.length<f)throw new RangeError("Out of range index");if(f<=i)return this;i=i>>>0,f=f===void 0?this.length:f>>>0,n||(n=0);let d;if(typeof n=="number")for(d=i;d<f;++d)this[d]=n;else{const y=u.isBuffer(n)?n:u.from(n,h),_=y.length;if(_===0)throw new TypeError('The value "'+n+'" is invalid for argument "value"');for(d=0;d<f-i;++d)this[d+i]=y[d%_]}return this};const ye={};function ct(c,n,i){ye[c]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:n.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${c}]`,this.stack,delete this.name}get code(){return c}set code(h){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:h,writable:!0})}toString(){return`${this.name} [${c}]: ${this.message}`}}}ct("ERR_BUFFER_OUT_OF_BOUNDS",function(c){return c?`${c} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ct("ERR_INVALID_ARG_TYPE",function(c,n){return`The "${c}" argument must be of type number. Received type ${typeof n}`},TypeError),ct("ERR_OUT_OF_RANGE",function(c,n,i){let f=`The value of "${c}" is out of range.`,h=i;return Number.isInteger(i)&&Math.abs(i)>2**32?h=Pt(String(i)):typeof i=="bigint"&&(h=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(h=Pt(h)),h+="n"),f+=` It must be ${n}. Received ${h}`,f},RangeError);function Pt(c){let n="",i=c.length;const f=c[0]==="-"?1:0;for(;i>=f+4;i-=3)n=`_${c.slice(i-3,i)}${n}`;return`${c.slice(0,i)}${n}`}function Xr(c,n,i){me(n,"offset"),(c[n]===void 0||c[n+i]===void 0)&&Re(n,c.length-(i+1))}function Mt(c,n,i,f,h,d){if(c>i||c<n){const y=typeof n=="bigint"?"n":"";let _;throw d>3?n===0||n===BigInt(0)?_=`>= 0${y} and < 2${y} ** ${(d+1)*8}${y}`:_=`>= -(2${y} ** ${(d+1)*8-1}${y}) and < 2 ** ${(d+1)*8-1}${y}`:_=`>= ${n}${y} and <= ${i}${y}`,new ye.ERR_OUT_OF_RANGE("value",_,c)}Xr(f,h,d)}function me(c,n){if(typeof c!="number")throw new ye.ERR_INVALID_ARG_TYPE(n,"number",c)}function Re(c,n,i){throw Math.floor(c)!==c?(me(c,i),new ye.ERR_OUT_OF_RANGE(i||"offset","an integer",c)):n<0?new ye.ERR_BUFFER_OUT_OF_BOUNDS:new ye.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${n}`,c)}const qr=/[^+/0-9A-Za-z-_]/g;function Vr(c){if(c=c.split("=")[0],c=c.trim().replace(qr,""),c.length<2)return"";for(;c.length%4!==0;)c=c+"=";return c}function ut(c,n){n=n||1/0;let i;const f=c.length;let h=null;const d=[];for(let y=0;y<f;++y){if(i=c.charCodeAt(y),i>55295&&i<57344){if(!h){if(i>56319){(n-=3)>-1&&d.push(239,191,189);continue}else if(y+1===f){(n-=3)>-1&&d.push(239,191,189);continue}h=i;continue}if(i<56320){(n-=3)>-1&&d.push(239,191,189),h=i;continue}i=(h-55296<<10|i-56320)+65536}else h&&(n-=3)>-1&&d.push(239,191,189);if(h=null,i<128){if((n-=1)<0)break;d.push(i)}else if(i<2048){if((n-=2)<0)break;d.push(i>>6|192,i&63|128)}else if(i<65536){if((n-=3)<0)break;d.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((n-=4)<0)break;d.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw new Error("Invalid code point")}return d}function Hr(c){const n=[];for(let i=0;i<c.length;++i)n.push(c.charCodeAt(i)&255);return n}function Wr(c,n){let i,f,h;const d=[];for(let y=0;y<c.length&&!((n-=2)<0);++y)i=c.charCodeAt(y),f=i>>8,h=i%256,d.push(h),d.push(f);return d}function Gt(c){return e.toByteArray(Vr(c))}function Ue(c,n,i,f){let h;for(h=0;h<f&&!(h+i>=n.length||h>=c.length);++h)n[h+i]=c[h];return h}function ee(c,n){return c instanceof n||c!=null&&c.constructor!=null&&c.constructor.name!=null&&c.constructor.name===n.name}function lt(c){return c!==c}const Kr=function(){const c="0123456789abcdef",n=new Array(256);for(let i=0;i<16;++i){const f=i*16;for(let h=0;h<16;++h)n[f+h]=c[i]+c[h]}return n}();function ue(c){return typeof BigInt>"u"?zr:c}function zr(){throw new Error("BigInt not supported")}})(k);window.Buffer=k.Buffer;var St={exports:{}},xe=typeof Reflect=="object"?Reflect:null,kt=xe&&typeof xe.apply=="function"?xe.apply:function(e,t,s){return Function.prototype.apply.call(e,t,s)},qe;xe&&typeof xe.ownKeys=="function"?qe=xe.ownKeys:Object.getOwnPropertySymbols?qe=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:qe=function(e){return Object.getOwnPropertyNames(e)};function sn(r){console&&console.warn&&console.warn(r)}var Lr=Number.isNaN||function(e){return e!==e};function F(){F.init.call(this)}St.exports=F;St.exports.once=un;F.EventEmitter=F;F.prototype._events=void 0;F.prototype._eventsCount=0;F.prototype._maxListeners=void 0;var jt=10;function ze(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(F,"defaultMaxListeners",{enumerable:!0,get:function(){return jt},set:function(r){if(typeof r!="number"||r<0||Lr(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");jt=r}});F.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};F.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Lr(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Sr(r){return r._maxListeners===void 0?F.defaultMaxListeners:r._maxListeners}F.prototype.getMaxListeners=function(){return Sr(this)};F.prototype.emit=function(e){for(var t=[],s=1;s<arguments.length;s++)t.push(arguments[s]);var o=e==="error",a=this._events;if(a!==void 0)o=o&&a.error===void 0;else if(!o)return!1;if(o){var l;if(t.length>0&&(l=t[0]),l instanceof Error)throw l;var u=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw u.context=l,u}var p=a[e];if(p===void 0)return!1;if(typeof p=="function")kt(p,this,t);else for(var E=p.length,g=Or(p,E),s=0;s<E;++s)kt(g[s],this,t);return!0};function Nr(r,e,t,s){var o,a,l;if(ze(t),a=r._events,a===void 0?(a=r._events=Object.create(null),r._eventsCount=0):(a.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),a=r._events),l=a[e]),l===void 0)l=a[e]=t,++r._eventsCount;else if(typeof l=="function"?l=a[e]=s?[t,l]:[l,t]:s?l.unshift(t):l.push(t),o=Sr(r),o>0&&l.length>o&&!l.warned){l.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=r,u.type=e,u.count=l.length,sn(u)}return r}F.prototype.addListener=function(e,t){return Nr(this,e,t,!1)};F.prototype.on=F.prototype.addListener;F.prototype.prependListener=function(e,t){return Nr(this,e,t,!0)};function on(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function $r(r,e,t){var s={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},o=on.bind(s);return o.listener=t,s.wrapFn=o,o}F.prototype.once=function(e,t){return ze(t),this.on(e,$r(this,e,t)),this};F.prototype.prependOnceListener=function(e,t){return ze(t),this.prependListener(e,$r(this,e,t)),this};F.prototype.removeListener=function(e,t){var s,o,a,l,u;if(ze(t),o=this._events,o===void 0)return this;if(s=o[e],s===void 0)return this;if(s===t||s.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,s.listener||t));else if(typeof s!="function"){for(a=-1,l=s.length-1;l>=0;l--)if(s[l]===t||s[l].listener===t){u=s[l].listener,a=l;break}if(a<0)return this;a===0?s.shift():an(s,a),s.length===1&&(o[e]=s[0]),o.removeListener!==void 0&&this.emit("removeListener",e,u||t)}return this};F.prototype.off=F.prototype.removeListener;F.prototype.removeAllListeners=function(e){var t,s,o;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[e]),this;if(arguments.length===0){var a=Object.keys(s),l;for(o=0;o<a.length;++o)l=a[o],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=s[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this};function _r(r,e,t){var s=r._events;if(s===void 0)return[];var o=s[e];return o===void 0?[]:typeof o=="function"?t?[o.listener||o]:[o]:t?cn(o):Or(o,o.length)}F.prototype.listeners=function(e){return _r(this,e,!0)};F.prototype.rawListeners=function(e){return _r(this,e,!1)};F.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):Br.call(r,e)};F.prototype.listenerCount=Br;function Br(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}F.prototype.eventNames=function(){return this._eventsCount>0?qe(this._events):[]};function Or(r,e){for(var t=new Array(e),s=0;s<e;++s)t[s]=r[s];return t}function an(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function cn(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function un(r,e){return new Promise(function(t,s){function o(l){r.removeListener(e,a),s(l)}function a(){typeof r.removeListener=="function"&&r.removeListener("error",o),t([].slice.call(arguments))}br(r,e,a,{once:!0}),e!=="error"&&ln(r,o,{once:!0})})}function ln(r,e,t){typeof r.on=="function"&&br(r,"error",e,t)}function br(r,e,t,s){if(typeof r.on=="function")s.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function o(a){s.once&&r.removeEventListener(e,o),t(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var fn=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=o[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}();globalThis&&globalThis.__values;var m=function(r){var e=function(t){fn(s,t);function s(o,a,l){var u=t.call(this,o||r,l)||this;if(Object.setPrototypeOf(u,s.prototype),u.name=r,a)for(var p in a)u[p]=a[p];if(l&&hn(l)&&"cause"in l&&!("cause"in u)){var E=l.cause;u.cause=E,"stack"in E&&(u.stack=u.stack+`
CAUSE: `+E.stack)}return u}return s}(Error);return e};function hn(r){return typeof r=="object"}var Ur=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=o[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}();m("AccountNameRequired");m("AccountNotSupported");m("AmountRequired");m("BluetoothRequired");m("BtcUnmatchedApp");m("CantOpenDevice");m("CashAddrNotSupported");m("CurrencyNotSupported");m("DeviceAppVerifyNotSupported");m("DeviceGenuineSocketEarlyClose");m("DeviceNotGenuine");m("DeviceOnDashboardExpected");m("DeviceOnDashboardUnexpected");m("DeviceInOSUExpected");m("DeviceHalted");m("DeviceNameInvalid");m("DeviceSocketFail");m("DeviceSocketNoBulkStatus");var pn=m("LockedDeviceError"),dn=m("DisconnectedDevice"),En=m("DisconnectedDeviceDuringOperation");m("DeviceExtractOnboardingStateError");m("DeviceOnboardingStatePollingError");m("EnpointConfig");m("EthAppPleaseEnableContractData");m("FeeEstimationFailed");m("FirmwareNotRecognized");m("HardResetFail");m("InvalidXRPTag");m("InvalidAddress");m("InvalidAddressBecauseDestinationIsAlsoSource");m("LatestMCUInstalledError");m("UnknownMCU");m("LedgerAPIError");m("LedgerAPIErrorWithMessage");m("LedgerAPINotAvailable");m("ManagerAppAlreadyInstalled");m("ManagerAppRelyOnBTC");m("ManagerAppDepInstallRequired");m("ManagerAppDepUninstallRequired");m("ManagerDeviceLocked");m("ManagerFirmwareNotEnoughSpace");m("ManagerNotEnoughSpace");m("ManagerUninstallBTCDep");m("NetworkDown");m("NoAddressesFound");m("NotEnoughBalance");m("NotEnoughBalanceToDelegate");m("NotEnoughBalanceInParentAccount");m("NotEnoughSpendableBalance");m("NotEnoughBalanceBecauseDestinationNotCreated");m("NoAccessToCamera");m("NotEnoughGas");m("NotSupportedLegacyAddress");m("GasLessThanEstimate");m("PriorityFeeTooLow");m("PriorityFeeTooHigh");m("PriorityFeeHigherThanMaxFee");m("MaxFeeTooLow");m("PasswordsDontMatch");m("PasswordIncorrect");m("RecommendSubAccountsToEmpty");m("RecommendUndelegation");m("TimeoutTagged");m("UnexpectedBootloader");m("MCUNotGenuineToDashboard");m("RecipientRequired");m("UnavailableTezosOriginatedAccountReceive");m("UnavailableTezosOriginatedAccountSend");m("UpdateFetchFileFail");m("UpdateIncorrectHash");m("UpdateIncorrectSig");m("UpdateYourApp");m("UserRefusedDeviceNameChange");m("UserRefusedAddress");m("UserRefusedFirmwareUpdate");m("UserRefusedAllowManager");m("UserRefusedOnDevice");var Xt=m("TransportOpenUserCancelled");m("TransportInterfaceNotAvailable");var gn=m("TransportRaceCondition");m("TransportWebUSBGestureRequired");m("DeviceShouldStayInApp");m("WebsocketConnectionError");m("WebsocketConnectionFailed");m("WrongDeviceForAccount");m("WrongAppForCurrency");m("ETHAddressNonEIP");m("CantScanQRCode");m("FeeNotLoaded");m("FeeRequired");m("FeeTooHigh");m("DustLimit");m("PendingOperation");m("SyncError");m("PairingFailed");m("GenuineCheckFailed");m("LedgerAPI4xx");m("LedgerAPI5xx");m("FirmwareOrAppUpdateRequired");m("LanguageNotFound");m("NoDBPathGiven");m("DBWrongPassword");m("DBNotReset");var qt;(function(r){r[r.Unknown=0]="Unknown",r[r.BleLocationServicesDisabled=1]="BleLocationServicesDisabled",r[r.BleBluetoothUnauthorized=2]="BleBluetoothUnauthorized",r[r.BleScanStartFailed=3]="BleScanStartFailed"})(qt||(qt={}));(function(r){Ur(e,r);function e(t,s){var o=r.call(this,s)||this;return o.name="HwTransportError",o.type=t,Object.setPrototypeOf(o,e.prototype),o}return e})(Error);var fe=function(r){Ur(e,r);function e(t,s){var o=this,a="TransportError";return o=r.call(this,t||a)||this,o.name=a,o.message=t,o.stack=new Error().stack,o.id=s,o}return e}(Error),$e={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,CUSTOM_IMAGE_BOOTLOADER:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761};function yn(r){switch(r){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=r&&r<=28671)return"Internal error, please report"}function xt(r){var e=Object.keys($e).find(function(a){return $e[a]===r})||"UNKNOWN_ERROR",t=yn(r)||e,s=r.toString(16),o="Ledger device: ".concat(t," (0x").concat(s,")");if(r===$e.LOCKED_DEVICE)throw new pn(o);this.name="TransportStatusError",this.message=o,this.stack=new Error().stack,this.statusCode=r,this.statusText=e}xt.prototype=new Error;var Ce=globalThis&&globalThis.__awaiter||function(r,e,t,s){function o(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(g){try{E(s.next(g))}catch(v){l(v)}}function p(g){try{E(s.throw(g))}catch(v){l(v)}}function E(g){g.done?a(g.value):o(g.value).then(u,p)}E((s=s.apply(r,e||[])).next())})},Fe=globalThis&&globalThis.__generator||function(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,o,a,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(E){return function(g){return p([E,g])}}function p(E){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(a=E[0]&2?o.return:E[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,E[1])).done)return a;switch(o=0,a&&(E=[E[0]&2,a.value]),E[0]){case 0:case 1:a=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,o=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!a||E[1]>a[0]&&E[1]<a[3])){t.label=E[1];break}if(E[0]===6&&t.label<a[1]){t.label=a[1],a=E;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(E);break}a[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(r,t)}catch(g){E=[6,g],o=0}finally{s=a=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},Vt=globalThis&&globalThis.__values||function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],s=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mn=globalThis&&globalThis.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var s=t.call(r),o,a=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(u){l={error:u}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return a},vn=globalThis&&globalThis.__spreadArray||function(r,e,t){if(t||arguments.length===2)for(var s=0,o=e.length,a;s<o;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return r.concat(a||Array.prototype.slice.call(e))},wn=function(){function r(){var e=this;this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new St.exports,this.send=function(t,s,o,a,l,u){return l===void 0&&(l=Buffer.alloc(0)),u===void 0&&(u=[$e.OK]),Ce(e,void 0,void 0,function(){var p,E;return Fe(this,function(g){switch(g.label){case 0:if(l.length>=256)throw new fe("data.length exceed 256 bytes limit. Got: "+l.length,"DataLengthTooBig");return[4,this.exchange(Buffer.concat([Buffer.from([t,s,o,a]),Buffer.from([l.length]),l]))];case 1:if(p=g.sent(),E=p.readUInt16BE(p.length-2),!u.some(function(v){return v===E}))throw new xt(E);return[2,p]}})})},this.exchangeAtomicImpl=function(t){return Ce(e,void 0,void 0,function(){var s,o,a,l,u,p=this;return Fe(this,function(E){switch(E.label){case 0:if(this.exchangeBusyPromise)throw new gn("An action was already pending on the Ledger device. Please deny or reconnect.");o=new Promise(function(g){s=g}),this.exchangeBusyPromise=o,a=!1,l=setTimeout(function(){a=!0,p.emit("unresponsive")},this.unresponsiveTimeout),E.label=1;case 1:return E.trys.push([1,,3,4]),[4,t()];case 2:return u=E.sent(),a&&this.emit("responsive"),[2,u];case 3:return clearTimeout(l),s&&s(),this.exchangeBusyPromise=null,[7];case 4:return[2]}})})},this._appAPIlock=null}return r.prototype.exchange=function(e){throw new Error("exchange not implemented")},r.prototype.exchangeBulk=function(e,t){var s=this,o=!1,a=function(){o=!0},l=function(){return Ce(s,void 0,void 0,function(){var u,p,E,g,v,T,I,q;return Fe(this,function(C){switch(C.label){case 0:if(o)return[2];C.label=1;case 1:C.trys.push([1,6,7,8]),u=Vt(e),p=u.next(),C.label=2;case 2:return p.done?[3,5]:(E=p.value,[4,this.exchange(E)]);case 3:if(g=C.sent(),o)return[2];if(v=g.readUInt16BE(g.length-2),v!==$e.OK)throw new xt(v);t.next(g),C.label=4;case 4:return p=u.next(),[3,2];case 5:return[3,8];case 6:return T=C.sent(),I={error:T},[3,8];case 7:try{p&&!p.done&&(q=u.return)&&q.call(u)}finally{if(I)throw I.error}return[7];case 8:return[2]}})})};return l().then(function(){return!o&&t.complete()},function(u){return!o&&t.error(u)}),{unsubscribe:a}},r.prototype.setScrambleKey=function(e){},r.prototype.close=function(){return Promise.resolve()},r.prototype.on=function(e,t){this._events.on(e,t)},r.prototype.off=function(e,t){this._events.removeListener(e,t)},r.prototype.emit=function(e){for(var t,s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];(t=this._events).emit.apply(t,vn([e],mn(s),!1))},r.prototype.setDebugMode=function(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")},r.prototype.setExchangeTimeout=function(e){this.exchangeTimeout=e},r.prototype.setExchangeUnresponsiveTimeout=function(e){this.unresponsiveTimeout=e},r.create=function(e,t){var s=this;return e===void 0&&(e=3e3),new Promise(function(o,a){var l=!1,u=s.listen({next:function(E){l=!0,u&&u.unsubscribe(),p&&clearTimeout(p),s.open(E.descriptor,e).then(o,a)},error:function(E){p&&clearTimeout(p),a(E)},complete:function(){p&&clearTimeout(p),l||a(new fe(s.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),p=t?setTimeout(function(){u.unsubscribe(),a(new fe(s.ErrorMessage_ListenTimeout,"ListenTimeout"))},t):null})},r.prototype.decorateAppAPIMethods=function(e,t,s){var o,a;try{for(var l=Vt(t),u=l.next();!u.done;u=l.next()){var p=u.value;e[p]=this.decorateAppAPIMethod(p,e[p],e,s)}}catch(E){o={error:E}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}},r.prototype.decorateAppAPIMethod=function(e,t,s,o){var a=this;return function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return Ce(a,void 0,void 0,function(){var p;return Fe(this,function(E){switch(E.label){case 0:if(p=this._appAPIlock,p)return[2,Promise.reject(new fe("Ledger Device is busy (lock "+p+")","TransportLocked"))];E.label=1;case 1:return E.trys.push([1,,3,4]),this._appAPIlock=e,this.setScrambleKey(o),[4,t.apply(s,l)];case 2:return[2,E.sent()];case 3:return this._appAPIlock=null,[7];case 4:return[2]}})})}},r.ErrorMessage_ListenTimeout="No Ledger device found (timeout)",r.ErrorMessage_NoDeviceFound="No Ledger device found",r}(),Ht=5;function In(r){var e=Buffer.alloc(2);return e.writeUInt16BE(r,0),e}var xn={data:Buffer.alloc(0),dataLength:0,sequence:0},An=function(r,e){return{makeBlocks:function(t){var s=Buffer.concat([In(t.length),t]),o=e-5,a=Math.ceil(s.length/o);s=Buffer.concat([s,Buffer.alloc(a*o-s.length+1).fill(0)]);for(var l=[],u=0;u<a;u++){var p=Buffer.alloc(5);p.writeUInt16BE(r,0),p.writeUInt8(Ht,2),p.writeUInt16BE(u,3);var E=s.slice(u*o,(u+1)*o);l.push(Buffer.concat([p,E]))}return l},reduceResponse:function(t,s){var o=t||xn,a=o.data,l=o.dataLength,u=o.sequence;if(s.readUInt16BE(0)!==r)throw new fe("Invalid channel","InvalidChannel");if(s.readUInt8(2)!==Ht)throw new fe("Invalid tag","InvalidTag");if(s.readUInt16BE(3)!==u)throw new fe("Invalid sequence","InvalidSequence");t||(l=s.readUInt16BE(5)),u++;var p=s.slice(t?5:7);return a=Buffer.concat([a,p]),a.length>l&&(a=a.slice(0,l)),{data:a,dataLength:l,sequence:u}},getReducedResult:function(t){if(t&&t.dataLength===t.data.length)return t.data}}},he={exports:{}};const Tn="2.0.0",Rn=256,Ln=Number.MAX_SAFE_INTEGER||9007199254740991,Sn=16;var Ye={SEMVER_SPEC_VERSION:Tn,MAX_LENGTH:Rn,MAX_SAFE_INTEGER:Ln,MAX_SAFE_COMPONENT_LENGTH:Sn};const Nn=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};var Ze=Nn;(function(r,e){const{MAX_SAFE_COMPONENT_LENGTH:t}=Ye,s=Ze;e=r.exports={};const o=e.re=[],a=e.src=[],l=e.t={};let u=0;const p=(E,g,v)=>{const T=u++;s(E,T,g),l[E]=T,a[T]=g,o[T]=new RegExp(g,v?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","[0-9]+"),p("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),p("MAINVERSION",`(${a[l.NUMERICIDENTIFIER]})\\.(${a[l.NUMERICIDENTIFIER]})\\.(${a[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${a[l.NUMERICIDENTIFIERLOOSE]})\\.(${a[l.NUMERICIDENTIFIERLOOSE]})\\.(${a[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${a[l.NUMERICIDENTIFIER]}|${a[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${a[l.NUMERICIDENTIFIERLOOSE]}|${a[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${a[l.PRERELEASEIDENTIFIER]}(?:\\.${a[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${a[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER","[0-9A-Za-z-]+"),p("BUILD",`(?:\\+(${a[l.BUILDIDENTIFIER]}(?:\\.${a[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${a[l.MAINVERSION]}${a[l.PRERELEASE]}?${a[l.BUILD]}?`),p("FULL",`^${a[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${a[l.MAINVERSIONLOOSE]}${a[l.PRERELEASELOOSE]}?${a[l.BUILD]}?`),p("LOOSE",`^${a[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${a[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${a[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${a[l.XRANGEIDENTIFIER]})(?:\\.(${a[l.XRANGEIDENTIFIER]})(?:\\.(${a[l.XRANGEIDENTIFIER]})(?:${a[l.PRERELEASE]})?${a[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${a[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[l.XRANGEIDENTIFIERLOOSE]})(?:${a[l.PRERELEASELOOSE]})?${a[l.BUILD]}?)?)?`),p("XRANGE",`^${a[l.GTLT]}\\s*${a[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${a[l.GTLT]}\\s*${a[l.XRANGEPLAINLOOSE]}$`),p("COERCE",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?(?:$|[^\\d])`),p("COERCERTL",a[l.COERCE],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${a[l.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",p("TILDE",`^${a[l.LONETILDE]}${a[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${a[l.LONETILDE]}${a[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${a[l.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",p("CARET",`^${a[l.LONECARET]}${a[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${a[l.LONECARET]}${a[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${a[l.GTLT]}\\s*(${a[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${a[l.GTLT]}\\s*(${a[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${a[l.GTLT]}\\s*(${a[l.LOOSEPLAIN]}|${a[l.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${a[l.XRANGEPLAIN]})\\s+-\\s+(${a[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${a[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(he,he.exports);const $n=["includePrerelease","loose","rtl"],_n=r=>r?typeof r!="object"?{loose:!0}:$n.filter(e=>r[e]).reduce((e,t)=>(e[t]=!0,e),{}):{};var Je=_n;const Wt=/^[0-9]+$/,Cr=(r,e)=>{const t=Wt.test(r),s=Wt.test(e);return t&&s&&(r=+r,e=+e),r===e?0:t&&!s?-1:s&&!t?1:r<e?-1:1},Bn=(r,e)=>Cr(e,r);var Fr={compareIdentifiers:Cr,rcompareIdentifiers:Bn};const De=Ze,{MAX_LENGTH:Kt,MAX_SAFE_INTEGER:Pe}=Ye,{re:zt,t:Yt}=he.exports,On=Je,{compareIdentifiers:we}=Fr;class Y{constructor(e,t){if(t=On(t),e instanceof Y){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>Kt)throw new TypeError(`version is longer than ${Kt} characters`);De("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const s=e.trim().match(t.loose?zt[Yt.LOOSE]:zt[Yt.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>Pe||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Pe||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Pe||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){const a=+o;if(a>=0&&a<Pe)return a}return o}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(De("SemVer.compare",this.version,this.options,e),!(e instanceof Y)){if(typeof e=="string"&&e===this.version)return 0;e=new Y(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Y||(e=new Y(e,this.options)),we(this.major,e.major)||we(this.minor,e.minor)||we(this.patch,e.patch)}comparePre(e){if(e instanceof Y||(e=new Y(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const s=this.prerelease[t],o=e.prerelease[t];if(De("prerelease compare",t,s,o),s===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(s===void 0)return-1;if(s===o)continue;return we(s,o)}while(++t)}compareBuild(e){e instanceof Y||(e=new Y(e,this.options));let t=0;do{const s=this.build[t],o=e.build[t];if(De("prerelease compare",t,s,o),s===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(s===void 0)return-1;if(s===o)continue;return we(s,o)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);s===-1&&this.prerelease.push(0)}t&&(we(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}var W=Y;const{MAX_LENGTH:bn}=Ye,{re:Zt,t:Jt}=he.exports,Qt=W,Un=Je,Cn=(r,e)=>{if(e=Un(e),r instanceof Qt)return r;if(typeof r!="string"||r.length>bn||!(e.loose?Zt[Jt.LOOSE]:Zt[Jt.FULL]).test(r))return null;try{return new Qt(r,e)}catch{return null}};var Te=Cn;const Fn=Te,Dn=(r,e)=>{const t=Fn(r,e);return t?t.version:null};var Pn=Dn;const Mn=Te,Gn=(r,e)=>{const t=Mn(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null};var kn=Gn;const er=W,jn=(r,e,t,s)=>{typeof t=="string"&&(s=t,t=void 0);try{return new er(r instanceof er?r.version:r,t).inc(e,s).version}catch{return null}};var Xn=jn;const tr=W,qn=(r,e,t)=>new tr(r,t).compare(new tr(e,t));var J=qn;const Vn=J,Hn=(r,e,t)=>Vn(r,e,t)===0;var Nt=Hn;const rr=Te,Wn=Nt,Kn=(r,e)=>{if(Wn(r,e))return null;{const t=rr(r),s=rr(e),o=t.prerelease.length||s.prerelease.length,a=o?"pre":"",l=o?"prerelease":"";for(const u in t)if((u==="major"||u==="minor"||u==="patch")&&t[u]!==s[u])return a+u;return l}};var zn=Kn;const Yn=W,Zn=(r,e)=>new Yn(r,e).major;var Jn=Zn;const Qn=W,ei=(r,e)=>new Qn(r,e).minor;var ti=ei;const ri=W,ni=(r,e)=>new ri(r,e).patch;var ii=ni;const si=Te,oi=(r,e)=>{const t=si(r,e);return t&&t.prerelease.length?t.prerelease:null};var ai=oi;const ci=J,ui=(r,e,t)=>ci(e,r,t);var li=ui;const fi=J,hi=(r,e)=>fi(r,e,!0);var pi=hi;const nr=W,di=(r,e,t)=>{const s=new nr(r,t),o=new nr(e,t);return s.compare(o)||s.compareBuild(o)};var $t=di;const Ei=$t,gi=(r,e)=>r.sort((t,s)=>Ei(t,s,e));var yi=gi;const mi=$t,vi=(r,e)=>r.sort((t,s)=>mi(s,t,e));var wi=vi;const Ii=J,xi=(r,e,t)=>Ii(r,e,t)>0;var Qe=xi;const Ai=J,Ti=(r,e,t)=>Ai(r,e,t)<0;var _t=Ti;const Ri=J,Li=(r,e,t)=>Ri(r,e,t)!==0;var Dr=Li;const Si=J,Ni=(r,e,t)=>Si(r,e,t)>=0;var Bt=Ni;const $i=J,_i=(r,e,t)=>$i(r,e,t)<=0;var Ot=_i;const Bi=Nt,Oi=Dr,bi=Qe,Ui=Bt,Ci=_t,Fi=Ot,Di=(r,e,t,s)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return Bi(r,t,s);case"!=":return Oi(r,t,s);case">":return bi(r,t,s);case">=":return Ui(r,t,s);case"<":return Ci(r,t,s);case"<=":return Fi(r,t,s);default:throw new TypeError(`Invalid operator: ${e}`)}};var Pr=Di;const Pi=W,Mi=Te,{re:Me,t:Ge}=he.exports,Gi=(r,e)=>{if(r instanceof Pi)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let t=null;if(!e.rtl)t=r.match(Me[Ge.COERCE]);else{let s;for(;(s=Me[Ge.COERCERTL].exec(r))&&(!t||t.index+t[0].length!==r.length);)(!t||s.index+s[0].length!==t.index+t[0].length)&&(t=s),Me[Ge.COERCERTL].lastIndex=s.index+s[1].length+s[2].length;Me[Ge.COERCERTL].lastIndex=-1}return t===null?null:Mi(`${t[2]}.${t[3]||"0"}.${t[4]||"0"}`,e)};var ki=Gi,ht,ir;function ji(){return ir||(ir=1,ht=function(r){r.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),ht}var Xi=b;b.Node=ge;b.create=b;function b(r){var e=this;if(e instanceof b||(e=new b),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(o){e.push(o)});else if(arguments.length>0)for(var t=0,s=arguments.length;t<s;t++)e.push(arguments[t]);return e}b.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,t=r.prev;return e&&(e.prev=t),t&&(t.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,e};b.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};b.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}};b.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)Vi(this,arguments[r]);return this.length};b.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)Hi(this,arguments[r]);return this.length};b.prototype.pop=function(){if(!!this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};b.prototype.shift=function(){if(!!this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};b.prototype.forEach=function(r,e){e=e||this;for(var t=this.head,s=0;t!==null;s++)r.call(e,t.value,s,this),t=t.next};b.prototype.forEachReverse=function(r,e){e=e||this;for(var t=this.tail,s=this.length-1;t!==null;s--)r.call(e,t.value,s,this),t=t.prev};b.prototype.get=function(r){for(var e=0,t=this.head;t!==null&&e<r;e++)t=t.next;if(e===r&&t!==null)return t.value};b.prototype.getReverse=function(r){for(var e=0,t=this.tail;t!==null&&e<r;e++)t=t.prev;if(e===r&&t!==null)return t.value};b.prototype.map=function(r,e){e=e||this;for(var t=new b,s=this.head;s!==null;)t.push(r.call(e,s.value,this)),s=s.next;return t};b.prototype.mapReverse=function(r,e){e=e||this;for(var t=new b,s=this.tail;s!==null;)t.push(r.call(e,s.value,this)),s=s.prev;return t};b.prototype.reduce=function(r,e){var t,s=this.head;if(arguments.length>1)t=e;else if(this.head)s=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=0;s!==null;o++)t=r(t,s.value,o),s=s.next;return t};b.prototype.reduceReverse=function(r,e){var t,s=this.tail;if(arguments.length>1)t=e;else if(this.tail)s=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=this.length-1;s!==null;o--)t=r(t,s.value,o),s=s.prev;return t};b.prototype.toArray=function(){for(var r=new Array(this.length),e=0,t=this.head;t!==null;e++)r[e]=t.value,t=t.next;return r};b.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,t=this.tail;t!==null;e++)r[e]=t.value,t=t.prev;return r};b.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new b;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var s=0,o=this.head;o!==null&&s<r;s++)o=o.next;for(;o!==null&&s<e;s++,o=o.next)t.push(o.value);return t};b.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new b;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var s=this.length,o=this.tail;o!==null&&s>e;s--)o=o.prev;for(;o!==null&&s>r;s--,o=o.prev)t.push(o.value);return t};b.prototype.splice=function(r,e,...t){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var s=0,o=this.head;o!==null&&s<r;s++)o=o.next;for(var a=[],s=0;o&&s<e;s++)a.push(o.value),o=this.removeNode(o);o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var s=0;s<t.length;s++)o=qi(this,o,t[s]);return a};b.prototype.reverse=function(){for(var r=this.head,e=this.tail,t=r;t!==null;t=t.prev){var s=t.prev;t.prev=t.next,t.next=s}return this.head=e,this.tail=r,this};function qi(r,e,t){var s=e===r.head?new ge(t,null,e,r):new ge(t,e,e.next,r);return s.next===null&&(r.tail=s),s.prev===null&&(r.head=s),r.length++,s}function Vi(r,e){r.tail=new ge(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function Hi(r,e){r.head=new ge(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function ge(r,e,t,s){if(!(this instanceof ge))return new ge(r,e,t,s);this.list=s,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{ji()(b)}catch{}const Wi=Xi,de=Symbol("max"),se=Symbol("length"),Ie=Symbol("lengthCalculator"),_e=Symbol("allowStale"),Ee=Symbol("maxAge"),ie=Symbol("dispose"),sr=Symbol("noDisposeOnSet"),V=Symbol("lruList"),Z=Symbol("cache"),Mr=Symbol("updateAgeOnGet"),pt=()=>1;class Ki{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[de]=e.max||1/0;const t=e.length||pt;if(this[Ie]=typeof t!="function"?pt:t,this[_e]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Ee]=e.maxAge||0,this[ie]=e.dispose,this[sr]=e.noDisposeOnSet||!1,this[Mr]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[de]=e||1/0,Le(this)}get max(){return this[de]}set allowStale(e){this[_e]=!!e}get allowStale(){return this[_e]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Ee]=e,Le(this)}get maxAge(){return this[Ee]}set lengthCalculator(e){typeof e!="function"&&(e=pt),e!==this[Ie]&&(this[Ie]=e,this[se]=0,this[V].forEach(t=>{t.length=this[Ie](t.value,t.key),this[se]+=t.length})),Le(this)}get lengthCalculator(){return this[Ie]}get length(){return this[se]}get itemCount(){return this[V].length}rforEach(e,t){t=t||this;for(let s=this[V].tail;s!==null;){const o=s.prev;or(this,e,s,t),s=o}}forEach(e,t){t=t||this;for(let s=this[V].head;s!==null;){const o=s.next;or(this,e,s,t),s=o}}keys(){return this[V].toArray().map(e=>e.key)}values(){return this[V].toArray().map(e=>e.value)}reset(){this[ie]&&this[V]&&this[V].length&&this[V].forEach(e=>this[ie](e.key,e.value)),this[Z]=new Map,this[V]=new Wi,this[se]=0}dump(){return this[V].map(e=>He(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[V]}set(e,t,s){if(s=s||this[Ee],s&&typeof s!="number")throw new TypeError("maxAge must be a number");const o=s?Date.now():0,a=this[Ie](t,e);if(this[Z].has(e)){if(a>this[de])return Ae(this,this[Z].get(e)),!1;const p=this[Z].get(e).value;return this[ie]&&(this[sr]||this[ie](e,p.value)),p.now=o,p.maxAge=s,p.value=t,this[se]+=a-p.length,p.length=a,this.get(e),Le(this),!0}const l=new zi(e,t,a,o,s);return l.length>this[de]?(this[ie]&&this[ie](e,t),!1):(this[se]+=l.length,this[V].unshift(l),this[Z].set(e,this[V].head),Le(this),!0)}has(e){if(!this[Z].has(e))return!1;const t=this[Z].get(e).value;return!He(this,t)}get(e){return dt(this,e,!0)}peek(e){return dt(this,e,!1)}pop(){const e=this[V].tail;return e?(Ae(this,e),e.value):null}del(e){Ae(this,this[Z].get(e))}load(e){this.reset();const t=Date.now();for(let s=e.length-1;s>=0;s--){const o=e[s],a=o.e||0;if(a===0)this.set(o.k,o.v);else{const l=a-t;l>0&&this.set(o.k,o.v,l)}}}prune(){this[Z].forEach((e,t)=>dt(this,t,!1))}}const dt=(r,e,t)=>{const s=r[Z].get(e);if(s){const o=s.value;if(He(r,o)){if(Ae(r,s),!r[_e])return}else t&&(r[Mr]&&(s.value.now=Date.now()),r[V].unshiftNode(s));return o.value}},He=(r,e)=>{if(!e||!e.maxAge&&!r[Ee])return!1;const t=Date.now()-e.now;return e.maxAge?t>e.maxAge:r[Ee]&&t>r[Ee]},Le=r=>{if(r[se]>r[de])for(let e=r[V].tail;r[se]>r[de]&&e!==null;){const t=e.prev;Ae(r,e),e=t}},Ae=(r,e)=>{if(e){const t=e.value;r[ie]&&r[ie](t.key,t.value),r[se]-=t.length,r[Z].delete(t.key),r[V].removeNode(e)}};class zi{constructor(e,t,s,o,a){this.key=e,this.value=t,this.length=s,this.now=o,this.maxAge=a||0}}const or=(r,e,t,s)=>{let o=t.value;He(r,o)&&(Ae(r,t),r[_e]||(o=void 0)),o&&e.call(s,o.value,o.key,r)};var Yi=Ki,Et,ar;function Q(){if(ar)return Et;ar=1;class r{constructor(w,S){if(S=s(S),w instanceof r)return w.loose===!!S.loose&&w.includePrerelease===!!S.includePrerelease?w:new r(w.raw,S);if(w instanceof o)return this.raw=w.value,this.set=[[w]],this.format(),this;if(this.options=S,this.loose=!!S.loose,this.includePrerelease=!!S.includePrerelease,this.raw=w,this.set=w.split("||").map(R=>this.parseRange(R.trim())).filter(R=>R.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${w}`);if(this.set.length>1){const R=this.set[0];if(this.set=this.set.filter(L=>!T(L[0])),this.set.length===0)this.set=[R];else if(this.set.length>1){for(const L of this.set)if(L.length===1&&I(L[0])){this.set=[L];break}}}this.format()}format(){return this.range=this.set.map(w=>w.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(w){w=w.trim();const R=`parseRange:${Object.keys(this.options).join(",")}:${w}`,L=t.get(R);if(L)return L;const A=this.options.loose,N=A?u[p.HYPHENRANGELOOSE]:u[p.HYPHENRANGE];w=w.replace(N,st(this.options.includePrerelease)),a("hyphen replace",w),w=w.replace(u[p.COMPARATORTRIM],E),a("comparator trim",w),w=w.replace(u[p.TILDETRIM],g),w=w.replace(u[p.CARETTRIM],v),w=w.split(/\s+/).join(" ");let U=w.split(" ").map(B=>C(B,this.options)).join(" ").split(/\s+/).map(B=>it(B,this.options));A&&(U=U.filter(B=>(a("loose invalid filter",B,this.options),!!B.match(u[p.COMPARATORLOOSE])))),a("range list",U);const $=new Map,M=U.map(B=>new o(B,this.options));for(const B of M){if(T(B))return[B];$.set(B.value,B)}$.size>1&&$.has("")&&$.delete("");const O=[...$.values()];return t.set(R,O),O}intersects(w,S){if(!(w instanceof r))throw new TypeError("a Range is required");return this.set.some(R=>q(R,S)&&w.set.some(L=>q(L,S)&&R.every(A=>L.every(N=>A.intersects(N,S)))))}test(w){if(!w)return!1;if(typeof w=="string")try{w=new l(w,this.options)}catch{return!1}for(let S=0;S<this.set.length;S++)if(ot(this.set[S],w,this.options))return!0;return!1}}Et=r;const e=Yi,t=new e({max:1e3}),s=Je,o=et(),a=Ze,l=W,{re:u,t:p,comparatorTrimReplace:E,tildeTrimReplace:g,caretTrimReplace:v}=he.exports,T=x=>x.value==="<0.0.0-0",I=x=>x.value==="",q=(x,w)=>{let S=!0;const R=x.slice();let L=R.pop();for(;S&&R.length;)S=R.every(A=>L.intersects(A,w)),L=R.pop();return S},C=(x,w)=>(a("comp",x,w),x=Be(x,w),a("caret",x),x=K(x,w),a("tildes",x),x=re(x,w),a("xrange",x),x=be(x,w),a("stars",x),x),P=x=>!x||x.toLowerCase()==="x"||x==="*",K=(x,w)=>x.trim().split(/\s+/).map(S=>rt(S,w)).join(" "),rt=(x,w)=>{const S=w.loose?u[p.TILDELOOSE]:u[p.TILDE];return x.replace(S,(R,L,A,N,U)=>{a("tilde",x,R,L,A,N,U);let $;return P(L)?$="":P(A)?$=`>=${L}.0.0 <${+L+1}.0.0-0`:P(N)?$=`>=${L}.${A}.0 <${L}.${+A+1}.0-0`:U?(a("replaceTilde pr",U),$=`>=${L}.${A}.${N}-${U} <${L}.${+A+1}.0-0`):$=`>=${L}.${A}.${N} <${L}.${+A+1}.0-0`,a("tilde return",$),$})},Be=(x,w)=>x.trim().split(/\s+/).map(S=>nt(S,w)).join(" "),nt=(x,w)=>{a("caret",x,w);const S=w.loose?u[p.CARETLOOSE]:u[p.CARET],R=w.includePrerelease?"-0":"";return x.replace(S,(L,A,N,U,$)=>{a("caret",x,L,A,N,U,$);let M;return P(A)?M="":P(N)?M=`>=${A}.0.0${R} <${+A+1}.0.0-0`:P(U)?A==="0"?M=`>=${A}.${N}.0${R} <${A}.${+N+1}.0-0`:M=`>=${A}.${N}.0${R} <${+A+1}.0.0-0`:$?(a("replaceCaret pr",$),A==="0"?N==="0"?M=`>=${A}.${N}.${U}-${$} <${A}.${N}.${+U+1}-0`:M=`>=${A}.${N}.${U}-${$} <${A}.${+N+1}.0-0`:M=`>=${A}.${N}.${U}-${$} <${+A+1}.0.0-0`):(a("no pr"),A==="0"?N==="0"?M=`>=${A}.${N}.${U}${R} <${A}.${N}.${+U+1}-0`:M=`>=${A}.${N}.${U}${R} <${A}.${+N+1}.0-0`:M=`>=${A}.${N}.${U} <${+A+1}.0.0-0`),a("caret return",M),M})},re=(x,w)=>(a("replaceXRanges",x,w),x.split(/\s+/).map(S=>Oe(S,w)).join(" ")),Oe=(x,w)=>{x=x.trim();const S=w.loose?u[p.XRANGELOOSE]:u[p.XRANGE];return x.replace(S,(R,L,A,N,U,$)=>{a("xRange",x,R,L,A,N,U,$);const M=P(A),O=M||P(N),B=O||P(U),ce=B;return L==="="&&ce&&(L=""),$=w.includePrerelease?"-0":"",M?L===">"||L==="<"?R="<0.0.0-0":R="*":L&&ce?(O&&(N=0),U=0,L===">"?(L=">=",O?(A=+A+1,N=0,U=0):(N=+N+1,U=0)):L==="<="&&(L="<",O?A=+A+1:N=+N+1),L==="<"&&($="-0"),R=`${L+A}.${N}.${U}${$}`):O?R=`>=${A}.0.0${$} <${+A+1}.0.0-0`:B&&(R=`>=${A}.${N}.0${$} <${A}.${+N+1}.0-0`),a("xRange return",R),R})},be=(x,w)=>(a("replaceStars",x,w),x.trim().replace(u[p.STAR],"")),it=(x,w)=>(a("replaceGTE0",x,w),x.trim().replace(u[w.includePrerelease?p.GTE0PRE:p.GTE0],"")),st=x=>(w,S,R,L,A,N,U,$,M,O,B,ce,at)=>(P(R)?S="":P(L)?S=`>=${R}.0.0${x?"-0":""}`:P(A)?S=`>=${R}.${L}.0${x?"-0":""}`:N?S=`>=${S}`:S=`>=${S}${x?"-0":""}`,P(M)?$="":P(O)?$=`<${+M+1}.0.0-0`:P(B)?$=`<${M}.${+O+1}.0-0`:ce?$=`<=${M}.${O}.${B}-${ce}`:x?$=`<${M}.${O}.${+B+1}-0`:$=`<=${$}`,`${S} ${$}`.trim()),ot=(x,w,S)=>{for(let R=0;R<x.length;R++)if(!x[R].test(w))return!1;if(w.prerelease.length&&!S.includePrerelease){for(let R=0;R<x.length;R++)if(a(x[R].semver),x[R].semver!==o.ANY&&x[R].semver.prerelease.length>0){const L=x[R].semver;if(L.major===w.major&&L.minor===w.minor&&L.patch===w.patch)return!0}return!1}return!0};return Et}var gt,cr;function et(){if(cr)return gt;cr=1;const r=Symbol("SemVer ANY");class e{static get ANY(){return r}constructor(g,v){if(v=t(v),g instanceof e){if(g.loose===!!v.loose)return g;g=g.value}l("comparator",g,v),this.options=v,this.loose=!!v.loose,this.parse(g),this.semver===r?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(g){const v=this.options.loose?s[o.COMPARATORLOOSE]:s[o.COMPARATOR],T=g.match(v);if(!T)throw new TypeError(`Invalid comparator: ${g}`);this.operator=T[1]!==void 0?T[1]:"",this.operator==="="&&(this.operator=""),T[2]?this.semver=new u(T[2],this.options.loose):this.semver=r}toString(){return this.value}test(g){if(l("Comparator.test",g,this.options.loose),this.semver===r||g===r)return!0;if(typeof g=="string")try{g=new u(g,this.options)}catch{return!1}return a(g,this.operator,this.semver,this.options)}intersects(g,v){if(!(g instanceof e))throw new TypeError("a Comparator is required");if((!v||typeof v!="object")&&(v={loose:!!v,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new p(g.value,v).test(this.value);if(g.operator==="")return g.value===""?!0:new p(this.value,v).test(g.semver);const T=(this.operator===">="||this.operator===">")&&(g.operator===">="||g.operator===">"),I=(this.operator==="<="||this.operator==="<")&&(g.operator==="<="||g.operator==="<"),q=this.semver.version===g.semver.version,C=(this.operator===">="||this.operator==="<=")&&(g.operator===">="||g.operator==="<="),P=a(this.semver,"<",g.semver,v)&&(this.operator===">="||this.operator===">")&&(g.operator==="<="||g.operator==="<"),K=a(this.semver,">",g.semver,v)&&(this.operator==="<="||this.operator==="<")&&(g.operator===">="||g.operator===">");return T||I||q&&C||P||K}}gt=e;const t=Je,{re:s,t:o}=he.exports,a=Pr,l=Ze,u=W,p=Q();return gt}const Zi=Q(),Ji=(r,e,t)=>{try{e=new Zi(e,t)}catch{return!1}return e.test(r)};var tt=Ji;const Qi=Q(),es=(r,e)=>new Qi(r,e).set.map(t=>t.map(s=>s.value).join(" ").trim().split(" "));var ts=es;const rs=W,ns=Q(),is=(r,e,t)=>{let s=null,o=null,a=null;try{a=new ns(e,t)}catch{return null}return r.forEach(l=>{a.test(l)&&(!s||o.compare(l)===-1)&&(s=l,o=new rs(s,t))}),s};var ss=is;const os=W,as=Q(),cs=(r,e,t)=>{let s=null,o=null,a=null;try{a=new as(e,t)}catch{return null}return r.forEach(l=>{a.test(l)&&(!s||o.compare(l)===1)&&(s=l,o=new os(s,t))}),s};var us=cs;const yt=W,ls=Q(),ur=Qe,fs=(r,e)=>{r=new ls(r,e);let t=new yt("0.0.0");if(r.test(t)||(t=new yt("0.0.0-0"),r.test(t)))return t;t=null;for(let s=0;s<r.set.length;++s){const o=r.set[s];let a=null;o.forEach(l=>{const u=new yt(l.semver.version);switch(l.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!a||ur(u,a))&&(a=u);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${l.operator}`)}}),a&&(!t||ur(t,a))&&(t=a)}return t&&r.test(t)?t:null};var hs=fs;const ps=Q(),ds=(r,e)=>{try{return new ps(r,e).range||"*"}catch{return null}};var Es=ds;const gs=W,Gr=et(),{ANY:ys}=Gr,ms=Q(),vs=tt,lr=Qe,fr=_t,ws=Ot,Is=Bt,xs=(r,e,t,s)=>{r=new gs(r,s),e=new ms(e,s);let o,a,l,u,p;switch(t){case">":o=lr,a=ws,l=fr,u=">",p=">=";break;case"<":o=fr,a=Is,l=lr,u="<",p="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(vs(r,e,s))return!1;for(let E=0;E<e.set.length;++E){const g=e.set[E];let v=null,T=null;if(g.forEach(I=>{I.semver===ys&&(I=new Gr(">=0.0.0")),v=v||I,T=T||I,o(I.semver,v.semver,s)?v=I:l(I.semver,T.semver,s)&&(T=I)}),v.operator===u||v.operator===p||(!T.operator||T.operator===u)&&a(r,T.semver))return!1;if(T.operator===p&&l(r,T.semver))return!1}return!0};var bt=xs;const As=bt,Ts=(r,e,t)=>As(r,e,">",t);var Rs=Ts;const Ls=bt,Ss=(r,e,t)=>Ls(r,e,"<",t);var Ns=Ss;const hr=Q(),$s=(r,e,t)=>(r=new hr(r,t),e=new hr(e,t),r.intersects(e));var _s=$s;const Bs=tt,Os=J;var bs=(r,e,t)=>{const s=[];let o=null,a=null;const l=r.sort((g,v)=>Os(g,v,t));for(const g of l)Bs(g,e,t)?(a=g,o||(o=g)):(a&&s.push([o,a]),a=null,o=null);o&&s.push([o,null]);const u=[];for(const[g,v]of s)g===v?u.push(g):!v&&g===l[0]?u.push("*"):v?g===l[0]?u.push(`<=${v}`):u.push(`${g} - ${v}`):u.push(`>=${g}`);const p=u.join(" || "),E=typeof e.raw=="string"?e.raw:String(e);return p.length<E.length?p:e};const pr=Q(),Ve=et(),{ANY:mt}=Ve,Se=tt,Ut=J,Us=(r,e,t={})=>{if(r===e)return!0;r=new pr(r,t),e=new pr(e,t);let s=!1;e:for(const o of r.set){for(const a of e.set){const l=Cs(o,a,t);if(s=s||l!==null,l)continue e}if(s)return!1}return!0},Cs=(r,e,t)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===mt){if(e.length===1&&e[0].semver===mt)return!0;t.includePrerelease?r=[new Ve(">=0.0.0-0")]:r=[new Ve(">=0.0.0")]}if(e.length===1&&e[0].semver===mt){if(t.includePrerelease)return!0;e=[new Ve(">=0.0.0")]}const s=new Set;let o,a;for(const I of r)I.operator===">"||I.operator===">="?o=dr(o,I,t):I.operator==="<"||I.operator==="<="?a=Er(a,I,t):s.add(I.semver);if(s.size>1)return null;let l;if(o&&a){if(l=Ut(o.semver,a.semver,t),l>0)return null;if(l===0&&(o.operator!==">="||a.operator!=="<="))return null}for(const I of s){if(o&&!Se(I,String(o),t)||a&&!Se(I,String(a),t))return null;for(const q of e)if(!Se(I,String(q),t))return!1;return!0}let u,p,E,g,v=a&&!t.includePrerelease&&a.semver.prerelease.length?a.semver:!1,T=o&&!t.includePrerelease&&o.semver.prerelease.length?o.semver:!1;v&&v.prerelease.length===1&&a.operator==="<"&&v.prerelease[0]===0&&(v=!1);for(const I of e){if(g=g||I.operator===">"||I.operator===">=",E=E||I.operator==="<"||I.operator==="<=",o){if(T&&I.semver.prerelease&&I.semver.prerelease.length&&I.semver.major===T.major&&I.semver.minor===T.minor&&I.semver.patch===T.patch&&(T=!1),I.operator===">"||I.operator===">="){if(u=dr(o,I,t),u===I&&u!==o)return!1}else if(o.operator===">="&&!Se(o.semver,String(I),t))return!1}if(a){if(v&&I.semver.prerelease&&I.semver.prerelease.length&&I.semver.major===v.major&&I.semver.minor===v.minor&&I.semver.patch===v.patch&&(v=!1),I.operator==="<"||I.operator==="<="){if(p=Er(a,I,t),p===I&&p!==a)return!1}else if(a.operator==="<="&&!Se(a.semver,String(I),t))return!1}if(!I.operator&&(a||o)&&l!==0)return!1}return!(o&&E&&!a&&l!==0||a&&g&&!o&&l!==0||T||v)},dr=(r,e,t)=>{if(!r)return e;const s=Ut(r.semver,e.semver,t);return s>0?r:s<0||e.operator===">"&&r.operator===">="?e:r},Er=(r,e,t)=>{if(!r)return e;const s=Ut(r.semver,e.semver,t);return s<0?r:s>0||e.operator==="<"&&r.operator==="<="?e:r};var Fs=Us;const vt=he.exports,Ds=Ye,Ps=W,gr=Fr,Ms=Te,Gs=Pn,ks=kn,js=Xn,Xs=zn,qs=Jn,Vs=ti,Hs=ii,Ws=ai,Ks=J,zs=li,Ys=pi,Zs=$t,Js=yi,Qs=wi,eo=Qe,to=_t,ro=Nt,no=Dr,io=Bt,so=Ot,oo=Pr,ao=ki,co=et(),uo=Q(),lo=tt,fo=ts,ho=ss,po=us,Eo=hs,go=Es,yo=bt,mo=Rs,vo=Ns,wo=_s,Io=bs,xo=Fs;var yr={parse:Ms,valid:Gs,clean:ks,inc:js,diff:Xs,major:qs,minor:Vs,patch:Hs,prerelease:Ws,compare:Ks,rcompare:zs,compareLoose:Ys,compareBuild:Zs,sort:Js,rsort:Qs,gt:eo,lt:to,eq:ro,neq:no,gte:io,lte:so,cmp:oo,coerce:ao,Comparator:co,Range:uo,satisfies:lo,toComparators:fo,maxSatisfying:ho,minSatisfying:po,minVersion:Eo,validRange:go,outside:yo,gtr:mo,ltr:vo,intersects:wo,simplifyRange:Io,subset:xo,SemVer:Ps,re:vt.re,src:vt.src,tokens:vt.t,SEMVER_SPEC_VERSION:Ds.SEMVER_SPEC_VERSION,compareIdentifiers:gr.compareIdentifiers,rcompareIdentifiers:gr.rcompareIdentifiers},At=globalThis&&globalThis.__assign||function(){return At=Object.assign||function(r){for(var e,t=1,s=arguments.length;t<s;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},At.apply(this,arguments)},pe,H;(function(r){r.blue="blue",r.nanoS="nanoS",r.nanoSP="nanoSP",r.nanoX="nanoX",r.stax="stax"})(H||(H={}));var Tt=(pe={},pe[H.blue]={id:H.blue,productName:"Ledger\xA0Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,masks:[822083584,822149120],getBlockSize:function(r){return 4*1024}},pe[H.nanoS]={id:H.nanoS,productName:"Ledger\xA0Nano\xA0S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,masks:[823132160],getBlockSize:function(r){var e;return yr.lt((e=yr.coerce(r))!==null&&e!==void 0?e:"","2.0.0")?4*1024:2*1024}},pe[H.nanoSP]={id:H.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1536*1024,masks:[856686592],getBlockSize:function(r){return 32}},pe[H.nanoX]={id:H.nanoX,productName:"Ledger\xA0Nano\xA0X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,masks:[855638016],getBlockSize:function(r){return 4*1024},bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},pe[H.stax]={id:H.stax,productName:"Ledger\xA0Stax",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:1536*1024,masks:[857735168],getBlockSize:function(r){return 32},bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]},pe);H.blue,H.nanoS,H.nanoSP,H.nanoX,H.stax;var mr=Object.values(Tt),kr=11415,vr=function(r){var e=mr.find(function(o){return o.legacyUsbProductId===r});if(e)return e;var t=r>>8,s=mr.find(function(o){return o.productIdMM===t});return s},Ao=[],wr={};for(var To in Tt){var Ir=Tt[To],wt=Ir.bluetoothSpec;if(wt)for(var It=0;It<wt.length;It++){var ke=wt[It];Ao.push(ke.serviceUuid),wr[ke.serviceUuid]=wr[ke.serviceUuid.replace(/-/g,"")]=At({deviceModel:Ir},ke)}}var Ro=0,le=[],xr=function(r,e,t){var s={type:r,id:String(++Ro),date:new Date};e&&(s.message=e),t&&(s.data=t),So(s)},Lo=function(r){return le.push(r),function(){var e=le.indexOf(r);e!==-1&&(le[e]=le[le.length-1],le.pop())}};function So(r){for(var e=0;e<le.length;e++)try{le[e](r)}catch(t){console.error(t)}}typeof window<"u"&&(window.__ledgerLogsListen=Lo);var No=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,o){s.__proto__=o}||function(s,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(s[a]=o[a])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function s(){this.constructor=e}e.prototype=t===null?Object.create(t):(s.prototype=t.prototype,new s)}}(),oe=globalThis&&globalThis.__awaiter||function(r,e,t,s){function o(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function u(g){try{E(s.next(g))}catch(v){l(v)}}function p(g){try{E(s.throw(g))}catch(v){l(v)}}function E(g){g.done?a(g.value):o(g.value).then(u,p)}E((s=s.apply(r,e||[])).next())})},ae=globalThis&&globalThis.__generator||function(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,o,a,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(E){return function(g){return p([E,g])}}function p(E){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(a=E[0]&2?o.return:E[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,E[1])).done)return a;switch(o=0,a&&(E=[E[0]&2,a.value]),E[0]){case 0:case 1:a=E;break;case 4:return t.label++,{value:E[1],done:!1};case 5:t.label++,o=E[1],E=[0];continue;case 7:E=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(E[0]===6||E[0]===2)){t=0;continue}if(E[0]===3&&(!a||E[1]>a[0]&&E[1]<a[3])){t.label=E[1];break}if(E[0]===6&&t.label<a[1]){t.label=a[1],a=E;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(E);break}a[2]&&t.ops.pop(),t.trys.pop();continue}E=e.call(r,t)}catch(g){E=[6,g],o=0}finally{s=a=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},$o=globalThis&&globalThis.__read||function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var s=t.call(r),o,a=[],l;try{for(;(e===void 0||e-- >0)&&!(o=s.next()).done;)a.push(o.value)}catch(u){l={error:u}}finally{try{o&&!o.done&&(t=s.return)&&t.call(s)}finally{if(l)throw l.error}}return a},_o=[{vendorId:kr}],Bo=function(){return Promise.resolve(!!(window.navigator&&window.navigator.hid))},We=function(){var r=navigator.hid;if(!r)throw new fe("navigator.hid is not supported","HIDNotSupported");return r};function jr(){return oe(this,void 0,void 0,function(){var r;return ae(this,function(e){switch(e.label){case 0:return[4,We().requestDevice({filters:_o})];case 1:return r=e.sent(),Array.isArray(r)?[2,r]:[2,[r]]}})})}function Rt(){return oe(this,void 0,void 0,function(){var r;return ae(this,function(e){switch(e.label){case 0:return[4,We().getDevices()];case 1:return r=e.sent(),[2,r.filter(function(t){return t.vendorId===kr})]}})})}function Oo(){return oe(this,void 0,void 0,function(){var r,e;return ae(this,function(t){switch(t.label){case 0:return[4,Rt()];case 1:return r=t.sent(),r.length>0?[2,r[0]]:[4,jr()];case 2:return e=t.sent(),[2,e[0]]}})})}var bo=function(r){No(e,r);function e(t){var s=r.call(this)||this;return s.channel=Math.floor(Math.random()*65535),s.packetSize=64,s.inputs=[],s.read=function(){return s.inputs.length?Promise.resolve(s.inputs.shift()):new Promise(function(o){s.inputCallback=o})},s.onInputReport=function(o){var a=Buffer.from(o.data.buffer);s.inputCallback?(s.inputCallback(a),s.inputCallback=null):s.inputs.push(a)},s._disconnectEmitted=!1,s._emitDisconnect=function(o){s._disconnectEmitted||(s._disconnectEmitted=!0,s.emit("disconnect",o))},s.exchange=function(o){return oe(s,void 0,void 0,function(){var a,l=this;return ae(this,function(u){switch(u.label){case 0:return[4,this.exchangeAtomicImpl(function(){return oe(l,void 0,void 0,function(){var p,E,g,v,T,I,q,C,P;return ae(this,function(K){switch(K.label){case 0:p=this,E=p.channel,g=p.packetSize,xr("apdu","=> "+o.toString("hex")),v=An(E,g),T=v.makeBlocks(o),I=0,K.label=1;case 1:return I<T.length?[4,this.device.sendReport(0,T[I])]:[3,4];case 2:K.sent(),K.label=3;case 3:return I++,[3,1];case 4:return(q=v.getReducedResult(C))?[3,6]:[4,this.read()];case 5:return P=K.sent(),C=v.reduceResponse(C,P),[3,4];case 6:return xr("apdu","<= "+q.toString("hex")),[2,q]}})})}).catch(function(p){throw p&&p.message&&p.message.includes("write")?(l._emitDisconnect(p),new En(p.message)):p})];case 1:return a=u.sent(),[2,a]}})})},s.device=t,s.deviceModel=typeof t.productId=="number"?vr(t.productId):void 0,t.addEventListener("inputreport",s.onInputReport),s}return e.request=function(){return oe(this,void 0,void 0,function(){var t,s;return ae(this,function(o){switch(o.label){case 0:return[4,jr()];case 1:return t=$o.apply(void 0,[o.sent(),1]),s=t[0],[2,e.open(s)]}})})},e.openConnected=function(){return oe(this,void 0,void 0,function(){var t;return ae(this,function(s){switch(s.label){case 0:return[4,Rt()];case 1:return t=s.sent(),t.length===0?[2,null]:[2,e.open(t[0])]}})})},e.open=function(t){return oe(this,void 0,void 0,function(){var s,o;return ae(this,function(a){switch(a.label){case 0:return[4,t.open()];case 1:return a.sent(),s=new e(t),o=function(l){t===l.device&&(We().removeEventListener("disconnect",o),s._emitDisconnect(new dn))},We().addEventListener("disconnect",o),[2,s]}})})},e.prototype.close=function(){return oe(this,void 0,void 0,function(){return ae(this,function(t){switch(t.label){case 0:return[4,this.exchangeBusyPromise];case 1:return t.sent(),this.device.removeEventListener("inputreport",this.onInputReport),[4,this.device.close()];case 2:return t.sent(),[2]}})})},e.prototype.setScrambleKey=function(){},e.isSupported=Bo,e.list=Rt,e.listen=function(t){var s=!1;Oo().then(function(a){if(!a)t.error(new Xt("Access denied to use Ledger device"));else if(!s){var l=typeof a.productId=="number"?vr(a.productId):void 0;t.next({type:"add",descriptor:a,deviceModel:l}),t.complete()}},function(a){t.error(new Xt(a.message))});function o(){s=!0}return{unsubscribe:o}},e}(wn);const Ne=224,Uo=1,Co=2,Fo=3,Do=4,Po=5,ne=36864,je=27013,Ar=27750,Xe=27904,Mo=1<<0,Go=1<<1,ko=1<<2,Tr=1<<3;class jo{constructor(e,t="l0v"){this.transport=void 0,this.transport=e,e.decorateAppAPIMethods(this,["getConfiguration","getPublicKey","getAddress","signMessage","signTransaction"],t)}getConfiguration(){return this.transport.send(Ne,Uo,0,0).then(e=>{if(k.Buffer.from(e.slice(e.length-2)).readUInt16BE(0)===ne)return{configuration:e.slice()};throw new Error("Failed to get configuration")})}getPublicKey({account:e},t=!1){const s=k.Buffer.alloc(4);return s.writeUInt32BE(e),this.transport.send(Ne,Co,t?1:0,0,s,[ne]).then(o=>{if(k.Buffer.from(o.slice(o.length-2)).readUInt16BE(0)===ne)return{publicKey:o.slice(1,33)};throw new Error("Failed to get public key")})}getAddress({account:e,contract:t}){const s=k.Buffer.alloc(5);return s.writeUInt32BE(e,0),s.writeUint8(t,4),this.transport.send(Ne,Do,1,0,s,[ne]).then(o=>{if(k.Buffer.from(o.slice(o.length-2)).readUInt16BE(0)===ne)return{address:o.slice(1,33)};throw new Error("Failed to get address")})}signMessage({account:e,message:t,chainId:s}){let o=0;const a=[],l=k.Buffer.alloc(4);if(l.writeUInt32BE(e,0),typeof s=="number"){const E=k.Buffer.alloc(4);E.writeUInt32BE(s,0),o|=Tr,a.push(E)}const u=[l,k.Buffer.alloc(1,o),...a,t],p=k.Buffer.concat(u);return this.transport.send(Ne,Fo,1,0,p,[ne,je,Ar,Xe]).then(E=>{const g=k.Buffer.from(E.slice(E.length-2)).readUInt16BE(0);if(g===ne)return{signature:E.slice(1,E.length-2)};throw g===je?new Error("Transaction approval request was rejected"):g===Xe?new Error("Message signing is not supported"):new Error("Message signing not allowed. Have you enabled it in the app settings?")})}signTransaction({account:e,originalWallet:t,wallet:s,message:o,chainId:a,context:l}){let u=0;const p=[],E=k.Buffer.alloc(5);E.writeUInt32BE(e,0),E.writeUint8(t,4);const g=k.Buffer.alloc(1);g.writeUInt8(l.decimals,0);let v=l.asset;l.asset.includes("-LP-")?v="LP":l.asset.length>8&&(v=l.asset.substring(0,6)+"..");const T=k.Buffer.from(v,"utf-8");if(typeof s=="number"&&s!==t&&(u|=Mo,p.push(k.Buffer.alloc(1,s))),typeof l.workchainId=="number"&&(u|=Go,p.push(k.Buffer.alloc(1,l.workchainId))),typeof l.address=="string"){if(l.address.length!==64)throw new Error("Invalid address format");u|=ko,p.push(k.Buffer.from(l.address,"hex"))}if(typeof a=="number"){const C=k.Buffer.alloc(4);C.writeUInt32BE(a,0),u|=Tr,p.push(C)}const I=[E,g,k.Buffer.alloc(1,T.length),T,k.Buffer.alloc(1,u),...p,o.subarray(4)],q=k.Buffer.concat(I);return this.transport.send(Ne,Po,1,0,q,[ne,je,Ar,Xe]).then(C=>{const P=k.Buffer.from(C.slice(C.length-2)).readUInt16BE(0);if(P===ne)return{signature:C.slice(1,C.length-2)};throw P===je?new Error("Transaction approval request was rejected"):P===Xe?new Error("Message signing is not supported"):new Error("Message signing not allowed. Have you enabled it in the app settings?")})}}class Xo{constructor(){this.addEventListeners()}addEventListeners(){window.addEventListener("message",async e=>{if(e&&e.data&&e.data.target==="LEDGER-IFRAME"){const{action:t,params:s}=e.data,o=`${t}-reply`;switch(t){case"ledger-get-configuration":await this.getConfiguration(o);break;case"ledger-get-public-key":await this.getPublicKey(o,s);break;case"ledger-get-address":await this.getAddress(o,s);break;case"ledger-sign-message":await this.signMessage(o,s);break;case"ledger-sign-transaction":await this.signTransaction(o,s);break;case"ledger-close-bridge":await this.cleanUp(o);break}}},!1)}sendMessageToExtension(e){window.parent.postMessage(e,"*")}async makeApp(){try{this.transport=await bo.create(),this.app=new jo(this.transport)}catch(e){throw console.log("LEDGER:::CREATE APP ERROR",e),e}}async cleanUp(e){this.app=null,this.transport&&await this.transport.close(),e&&this.sendMessageToExtension({action:e,success:!0})}async getConfiguration(e){try{await this.makeApp();const t=await this.app.getConfiguration();this.sendMessageToExtension({action:e,success:!0,payload:t})}catch(t){const s=this.ledgerErrToMessage(t);this.sendMessageToExtension({action:e,success:!1,error:new Error(s.toString())})}finally{await this.cleanUp()}}async getPublicKey(e,t){try{await this.makeApp();const s=await this.app.getPublicKey(t);this.sendMessageToExtension({action:e,success:!0,payload:s})}catch(s){const o=this.ledgerErrToMessage(s);this.sendMessageToExtension({action:e,success:!1,error:new Error(o.toString())})}finally{await this.cleanUp()}}async getAddress(e,t){try{await this.makeApp();const s=await this.app.getAddress(t);this.sendMessageToExtension({action:e,success:!0,payload:s})}catch(s){const o=this.ledgerErrToMessage(s);this.sendMessageToExtension({action:e,success:!1,error:new Error(o.toString())})}finally{await this.cleanUp()}}async signMessage(e,t){try{await this.makeApp();const s=await this.app.signMessage(t);this.sendMessageToExtension({action:e,success:!0,payload:s})}catch(s){const o=this.ledgerErrToMessage(s);this.sendMessageToExtension({action:e,success:!1,error:new Error(o.toString())})}finally{await this.cleanUp()}}async signTransaction(e,t){try{await this.makeApp();const s=await this.app.signTransaction(t);this.sendMessageToExtension({action:e,success:!0,payload:s})}catch(s){const o=this.ledgerErrToMessage(s);this.sendMessageToExtension({action:e,success:!1,error:new Error(o.toString())})}finally{await this.cleanUp()}}ledgerErrToMessage(e){const t=u=>String(u.message||u).includes("0x6700"),s=u=>String(u.message||u).includes("0x6804"),o=u=>u.name&&u.name.includes("TransportOpenUserCancelled"),a=u=>u.message&&u.message.includes("Message signing is not supported"),l=u=>u.message&&u.message.includes("Transaction approval request was rejected");return t(e)?"LEDGER_WRONG_APP":s(e)?"LEDGER_LOCKED":l(e)?"TRANSACTION_REJECTED":a(e)?"SIGN_NON_SUPPORTED":o(e)&&e.message&&e.message.includes("Access denied to use Ledger device")?"USER_DENIED":o(e)&&e.message&&e.message.includes("Failed to execute 'requestDevice' on 'HID'")?"USER_CANCELLED":e.toString()}}(()=>{const e=new URLSearchParams(window.location.search).get("theme")||"default",t=document.querySelector(`[data-theme="${e}"]`);t.style.display=null;const s=new Xo,o=t.querySelector('[data-action="pairing"]');o&&o.addEventListener("click",()=>s.getConfiguration());const a=t.querySelector('[data-action="back"]');a&&a.addEventListener("click",()=>s.cleanUp("ledger-bridge-back")),console.log(`EVER Wallet <=> Ledger Bridge initialized from ${window.location}!`)})();
